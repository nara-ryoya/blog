



<!DOCTYPE html>
<html >
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-F16RX8546B"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-F16RX8546B');
  </script>
  <meta name="google-site-verification" content="EQRU9lBgJCN1pwMgOyT-uwtwgwdEcWryxKkW4_uQrYU" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content=#ffffff>
    <link rel="stylesheet" href="/blog/assets/css/app.css">
    <link rel="shortcut icon" type="image/png"
           href="/blog/licky.JPG" 
    />
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.0/dist/alpine.min.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css">
    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Jekyllの仕組み | Ryoya Nara</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Jekyllの仕組み" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="春休みにWebの勉強してみよう！と思い、友人から紹介されてJekyllでオリジナルのブログサイトを作ってみることにした。「簡単にできるよ」と言われたが、実際にテンプレートを自分でアレンジしようとすると意外と苦戦したので、メモとして残しておく。" />
<meta property="og:description" content="春休みにWebの勉強してみよう！と思い、友人から紹介されてJekyllでオリジナルのブログサイトを作ってみることにした。「簡単にできるよ」と言われたが、実際にテンプレートを自分でアレンジしようとすると意外と苦戦したので、メモとして残しておく。" />
<link rel="canonical" href="http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html" />
<meta property="og:url" content="http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html" />
<meta property="og:site_name" content="Ryoya Nara" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-05T14:45:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Jekyllの仕組み" />
<script type="application/ld+json">
{"url":"http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html","headline":"Jekyllの仕組み","dateModified":"2021-03-05T14:45:00+09:00","datePublished":"2021-03-05T14:45:00+09:00","description":"春休みにWebの勉強してみよう！と思い、友人から紹介されてJekyllでオリジナルのブログサイトを作ってみることにした。「簡単にできるよ」と言われたが、実際にテンプレートを自分でアレンジしようとすると意外と苦戦したので、メモとして残しておく。","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- head scripts --></head>

  <body>
    <nav class="navbar is-primary " x-data="{ openNav: false }">
    <div class="container">
        <div class="navbar-brand">
            <a href="/blog/" class="navbar-item">
                Ryoya Nara
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu" :class="{ 'is-active': openNav }" x-on:click="openNav = !openNav">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu" :class="{ 'is-active': openNav }">
            <div class="navbar-start">
                <a href="/blog/" class="navbar-item ">Home</a>
                
                
                    
                    <a href="/blog/profile.html" class="navbar-item ">Profile</a>
                    
                
                
            </div>

            <div class="navbar-end">
                
            </div>

        </div>
    </div>
</nav>

    
        <section class="hero  is-medium  is-bold is-primary" >
    <div class="hero-body ">
        <div class="container">
            <h1 class="title is-2">Jekyllの仕組み</h1>
            <p class="subtitle is-3"></p>
            
        </div>
    </div>
</section>
    
    


    <section class="section">
        <div class="container">
            <div class="columns">
                
                <div class="column is-12">
                    
                    
                    
                    
                    <div class="content">

    <p>Published: Mar 5, 2021 by </p>

    <p>春休みにWebの勉強してみよう！と思い、友人から紹介されてJekyllでオリジナルのブログサイトを作ってみることにした。「簡単にできるよ」と言われたが、実際にテンプレートを自分でアレンジしようとすると意外と苦戦したので、メモとして残しておく。</p>

<h1 id="jekyllの仕組み">Jekyllの仕組み</h1>
<p>Jekyllで自作ブログを作るにあたり、いろいろな記事を見て試行錯誤したのだが、どうにもらちがあかない。記事によって紹介されているやり方がまちまちで、「結局何をどうすれば自分の思い通りになるのか」が全く把握できなかった。</p>

<p>そこで、途中で方向転換して、「そもそもJekyllがどのように動いているのか」を完全に把握してしまうことに焦点を絞って試行錯誤してみた。そのうちに何となく仕組みを理解できたので、以下に書き留めておく。</p>

<h2 id="そもそもjekyllとは何なのか">そもそもJekyllとは何なのか</h2>

<p>Jekyllとは、カッコよくいうと「静的サイトジェネレーター」と言われるものである。具体的にいうと、「markdownを書いてコマンドを叩くと、あらかじめ用意しておいたテンプレートに合うようなhtmlとCSSを作成してくれる」というとんでもない便利ツールなのである。</p>

<h2 id="jekyllのファイル構造一例">Jekyllのファイル構造(一例)</h2>
<p>メインのディレクトリ構造は以下のようになる。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── Gemfile
├── Gemfile.lock
├── README.md
├── _config.yml
├── _data
├── _includes
├── _layouts
├── _posts
├── _sass
├── _site
├── index.md
├── assets
│   ├── css
│   │   └── app.scss
│   └── js
│       └── app.js
├── node_modules
├── package-lock.json
└── package.json
</code></pre></div></div>
<p>おそらく、多くの記事で紹介されているように、コマンドで<code class="language-plaintext highlighter-rouge">jekyll new (プロジェクト名)</code>と叩くだけでは、「_layouts」や「_includes」というディレクトリは出てこないだろう。ただ、Jekyllのファイル生成のメインを担うのはこれらのディレクトリであり、自分でテンプレートをアレンジする際にはこれらのディレクトリを用意して変更する必要がある。</p>

<p>では、これらのディレクトリが用意されていない場合はどうなるのか。その場合は、ローカル内のライブラリの、特定のテーマに該当するディレクトリ内の「_layouts」や「_includes」などのディレクトリを参照してhtmlとcssを生成しているのだ。</p>

<p>もう少し分かりやすく説明する(<a href="http://jekyllrb-ja.github.io/docs/themes/">こちらの記事</a>を参考に書いた)。
以下のように、jekyllプロジェクトを立ち上げて、そのディレクトリ内に移動する。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll new my-site
cd my-site
</code></pre></div></div>

<p>次に以下のようにコマンドを叩く。すると、ローカル内の<em>theme</em>に相当するディレクトリのパスが出力されるはずだ。<em>theme</em>にはJekyllのテーマを入れられる。Jekyllのデフォルトのテーマはminimaなので、<code class="language-plaintext highlighter-rouge">bundle info --path minima</code>となる。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle info --path theme
&gt;&gt;/Library/Ruby/Gems/2.6.0/gems/minima-2.5.1
</code></pre></div></div>
<p>finderでこのディレクトリに移動して見てみると、「_layouts」などのディレクトリがあるのが確認できると思う。各ディレクトリの詳細な役割は、README.mdに詳細に英語で書かれているので、ここでは各ディレクトリのおおまかな役割について書いていく。<br /></p>

<ul>
  <li>
    <p>_layouts</p>

    <p>テンプレートの1番の大枠となるhtmlファイルがおかれているディレクトリ。中にはblog.html、default.htmlなどのファイルが置かれており、これらのファイル名が各レイアウト名に対応しており、markdownの冒頭でこれらのどのレイアウトを使うのかを指定する。
  例えば、index.mdの冒頭で、以下のようにしていしたら、index.htmlは_layouts内のblog.htmlテンプレートにしたがって生成されるのだ。</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ---
  layout: blog
  title: Ryoya Nara
  subtitle: 自作ブログ。
  ---
</code></pre></div>    </div>

    <p>ここで、layout以外にも、titleやsubtitleなどのを指定しているのだが、これらもhtml生成に関わる重要な変数である。それについては次の項目で説明する。<br /></p>
  </li>
  <li>
    <p>_includes</p>

    <p>例えば、_layoutsのdefault.htmlが以下のようになっているとする。</p>
    <pre><code class="language-html:default.html">    
  &lt;html {% if site.fixed_navbar %} class="has-navbar-fixed-{{ site.fixed_navbar }}" {% endif %}&gt;
  {% include head.html %}
  &lt;body&gt;
      {% include header.html %}
      {% unless page.hide_hero %}
          {% include hero.html %}
      {% endunless %}
  &lt;/body&gt;
  &lt;/html&gt;
    
</code></pre>

    <p>ここで、<code class="language-plaintext highlighter-rouge">{% include header.html %}</code>のように埋め込まれているheader.htmlを_includesファイル内から参照してhtmlを作成している。つまり、_layouts内のテンプレートの各構成要素のさらなるテンプレートとなるファイルを保持しているのが_includesディレクトリであるわけだ。</p>

    <p>また、_includesの各ファイルの中で、ところどころ<code class="language-plaintext highlighter-rouge">{{ page.title}}</code>のようにLiquidの変数が埋め込まれている箇所がある。先ほどのindex.mdの例であげた冒頭の記述は、これらの変数を指定してあげているのだ。 <br /></p>
  </li>
  <li>
    <p>_posts</p>

    <p>ブログの投稿のmdファイルを入れるところ。</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ---
  layout: post
  title:  "2A総括"
  date:   2021-02-26 14:15 +0900
  ---
</code></pre></div>    </div>

    <p>冒頭にこのように記述して、テンプレートに埋める変数に代入している。<br /></p>
  </li>
  <li>
    <p>_sass, assets, node_modules</p>

    <p>各cssを出力するためのテンプレートとなるscssファイルやcssファイル、jsファイルが置かれている(正直まだあまり仕組みが分かってない…)。<br /></p>
  </li>
  <li>
    <p>_site</p>

    <p>各テンプレートから作成されたhtmlやcssが出力されるディレクトリ。</p>
  </li>
  <li>
    <p>_config.yml</p>

    <p>各テンプレートに埋め込む変数に代入する値を決めるファイル。</p>
  </li>
</ul>

<h2 id="コマンドを叩いた際のファイル生成の流れ">コマンドを叩いた際のファイル生成の流れ</h2>
<ol>
  <li>
    <p>_posts以下のmarkdownファイルや親ディレクトリ以下のmarkdownファイルを参照し、それに合うようなhtml, CSSファイルを作成する。</p>
  </li>
  <li>
    <p>_site以下にhtml, CSSを出力する。</p>

    <p><br /><br /></p>
  </li>
</ol>

<h2 id="最後に">最後に</h2>

<p>正直最後の方は疲れてしまってだいぶ雑になってしまったが、まぁおおまかにこれくらい把握しておけば大体あとは自分でアレンジが聞くと思う。実際にいじってみるとめちゃくちゃ面白いので、もう少しきちんと勉強して頑張ってみたい。</p>


</div>

<div class="tags">
    
</div>


<p><strong>Share</strong></p>
<div class="buttons ">
    <a class="button is-medium is-facebook"
       onclick="window.open('https://www.facebook.com/share.php?u=http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html');">
        <span class="icon"><i class="fab fa-facebook fa-lg"></i></span>
    </a>
    <a class="button is-medium is-twitter"
       onclick="window.open('https://twitter.com/intent/tweet?text=http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html');">
        <span class="icon"><i class="fab fa-twitter fa-lg"></i></span>
    </a>
    <a class="button is-medium is-linkedin"
       onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html&title=Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF&summary=&source=');">
        <span class="icon"><i class="fab fa-linkedin fa-lg"></i></span>
    </a>
    <a class="button is-medium is-reddit"
       onclick="window.open('https://reddit.com/submit?url=http://localhost:4000/blog/2021/03/05/Jekyll%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF.html');">
        <span class="icon"><i class="fab fa-reddit fa-lg"></i></span>
    </a>
</div>




                </div>
                
            </div>
        </div>
    </section>
    
        <footer class="footer">
    <div class="container">
        
        

        <div class="content is-small has-text-centered">
            <p class="">Theme built by <a href="https://www.csrhymes.com">C.S. Rhymes</a></p>
        </div>
    </div>
</footer>

    
    <script src="/blog/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>
</html>

